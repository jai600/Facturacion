
@model List<Facturas>

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Listado de Productos</title>
    <!-- Agrega los enlaces a los archivos CSS de Bootstrap -->
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />

    <script>
        function AgregarFacturaVista() {
            window.location.href = '@Url.Action("FormFacturas","FacturaController1")';
        }

        function EditarRegistro(IdFactura) {

            var id = IdFactura; // El valor del parámetro que deseas pasar
            var url = '@Url.Action("FormFacturas", "FacturaController1", new { id = "placeholder" })'.replace("placeholder", id);
            window.location.href = url;

        }

        function EliminarFactura(IdFactura){

            var id = IdFactura;
            jQuery.ajax({
                url: '@Url.Action("ElimninarFactura", "FacturaController1")',
                type: "POST",
                data: { Id: id },             
                success: function (data) {

                    if (data.respuesta) {

                        Swal.fire('¡Advertencia!', 'Factura almacenada con éxito', 'success');
                        LimpiarCampos();
                    }

                },
                Error: function (err) {
                    Swal.fire('¡Advertencia!', 'Se presento un error al guardar', 'error');
                    console.log(err.message)
                }

            })
        }
    </script>
</head>
<body>
    <div class="card-body">
        <h2>Listado de facturas</h2>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Numero de factura</th>
                    <th>Nombre Cliente</th>
                    <th>Total</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var producto in Model)
                {
                    <tr>
                       
                        <td>@producto.Fecha.ToString("yyyy-MM-dd")</td>
                        <td>@producto.NumeroFactura</td>
                        <td>@producto.NombreCliente</td>
                        <td>@producto.Total.ToString("C")</td> <!-- Formatea el precio como moneda -->
                        <td><button class="btn-warning" onclick="EditarRegistro(@producto.idFactura)">Editar</button> <button class="btn-danger" onclick="EliminarFactura(@producto.idFactura)">Eliminar</button></td>
                    </tr>
                }
            </tbody>
        </table>

        <button class="btn-primary" onclick="AgregarFacturaVista()"> Agregar</button>
    </div>
</body>
</html>
